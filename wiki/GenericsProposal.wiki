#summary Generics Proposal

= Introduction =

From Wikipedia, the free encyclopedia:
   
   Generics are a facility of generic programming that was added to the Java programming language in 2004 as part of J2SE 5.0. They allow "a type or method to operate on objects of various types while providing compile-time type safety." A common use of this feature is when using a Java Collection that can hold objects of any type, to specify the specific type of object stored in it.


= Details =

Generic class 

{{{

DELEGATE(
  GENERIC('T'),
  [[T, T]],
  Boolean, function Comparator(_1, _2) {});

// Map<TKey, TValue>
CLASS(
  GENERIC('TKey', 'TValue'),
  'MyBaseMap', [
     [[T, T]],
     ABSTRACT, T, function add(t1, t2) {}
  ]);

INTERFACE(
  GENERIC('T', EXTENDS(MyBase)), // may interfaces be GENERIC ?
  'MyIfc', [
     T, 'param' // not a property, but a shortcut ?
  ]);

// Dictionary<T>
CLASS(
  GENERIC('T'),
  'MyDictionary', 
      EXTENDS(MyBase.OF(String, T)),
      IMPLEMENTS(MyIfc.OF(T)), [ 

    T, 'param',

    [[T]],
    function $(param) {},

    [[T, T]],
    T, function add(_1, _2) { return _1 + _2; },

    READONLY, Comparator.OF(T), 'comparator'
  ]);
}}}

Instantiation

{{{
// first one arg is generalization of generic MyGenericClass<T>
var instance = MyDictionary(Number, 1); // specified with Number
}}}

Generics typing is check only in DEBUG mode. Generics typing is available via reflection

=== Impelementation notes ===

{{{
function SpecializationDescriptor(ctor, args) {}

var instance = new Dictinary(String, Number);
instance.__PROTECTED.TKey === String;
instance.__PROTECTED.TValue === Number;


}}}